{% comment %} {% extends "base.html" %} {% endcomment %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/profile_detail.css' %}">
<script src="{% static 'js/profile_detail.js' %}"></script>
<div class="container">
    <div class="profile-detail">
        <h2 class="text-center">Профиль пользователя: {{ profile.user.username }}</h2>

        <div class="avatar">
            {% if profile.avatar %}
                <img src="{{ profile.avatar.url }}" alt="Avatar" class="avatar-img">
            {% else %}
                <img src="{% static 'img/avatar.jpg' %}" alt="Avatar" class="avatar-img">
            {% endif %}
        </div>

        <div class="followers">
            <p><strong>Подписчики:</strong> <span id="followers-count">{{ profile.followers.count }}</span></p>
        </div>
        {% if profile.user != user %}
        <div class="actions">
            {% if user.is_authenticated %}
                {% if user in profile.followers.all %}
                    <input type="hidden" id="user-id" value="{{ user.id }}">
                    <input type="hidden" id="target-user-id" value="{{ profile.user.id }}">
                    <button id="subscribe" class="btn btn-danger" onclick="toggleSubscription()">Отписаться</button>
                {% else %}
                    <input type="hidden" id="user-id" value="{{ user.id }}">
                    <input type="hidden" id="target-user-id" value="{{ profile.user.id }}">
                    <button id="subscribe" class="btn btn-success" onclick="toggleSubscription()">Подписаться</button>
                {% endif %}
            {% endif %}
        </div>
        {% endif %}
        <div class="profile-info">
            <p><strong>Биография:</strong> {{ profile.bio }}</p>
            <p><strong>Местоположение:</strong> {{ profile.location }}</p>
            <p><strong>Дата рождения:</strong> {{ profile.birth_date }}</p>
            <p><strong>Создан:</strong> {{ profile.created_at }}</p>
            <p><strong>Обновлен:</strong> {{ profile.updated_at }}</p>
        </div>
        {% if profile.user == user %}
        <div class="btn btn-primary"><a href="{% url 'profile_app:profile_edit' profile.id %}">Редактировать профиль</a></div>
        {% endif %}
    </div>
</div>

<style>
    .btn {
        position: relative;
        padding: 10px 20px;
        font-size: 16px;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        overflow: hidden;
    }

    .btn-success {
        background-color: #22a816;
        box-shadow: 0px 4px 10px rgba(34, 168, 22, 0.4);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .btn-success:hover {
        transform: scale(1.05);
        box-shadow: 0px 8px 20px rgba(69, 214, 56, 0.6);
    }

    .btn-danger {
        background-color: #810b0b;
        box-shadow: 0px 4px 10px rgba(129, 11, 11, 0.4);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .btn-danger:hover {
        transform: scale(1.05);
        box-shadow: 0px 8px 20px rgba(69, 7, 7, 0.6);
    }

    .effect {
        position: absolute;
        border-radius: 50%;
        pointer-events: none;
        animation: none;
    }

    @keyframes splash {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }

    @keyframes drip {
        to {
            top: 300px;
            opacity: 0;
        }
    }
    
</style>

{% endblock %}
